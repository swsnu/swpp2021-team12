{"version":3,"sources":["../src/ReactSeventeenAdapter.js"],"names":["is164","TestUtils","Simulate","touchStart","is165","auxClick","is166","React","unstable_AsyncMode","is168","act","hasShouldComponentUpdateBug","semver","satisfies","testRendererVersion","FiberTags","nodeAndSiblingsArray","nodeWithSibling","array","node","push","sibling","flatten","arr","result","stack","i","length","n","pop","el","Array","isArray","nodeTypeFromType","type","Portal","isMemo","Memo","isLazy","Lazy","unmemoType","checkIsSuspenseAndCloneElement","suspenseFallback","children","props","fallback","replaceLazyWithFallback","FakeSuspenseWrapper","createElement","elementToTree","containerInfo","nodeType","key","ref","instance","rendered","toTree","vnode","tag","HostRoot","childrenToTree","child","HostPortal","stateNode","memoizedProps","ClassComponent","FunctionalComponent","MemoClass","elementType","MemoSFC","renderedNodes","map","HostComponent","HostText","Fragment","Mode","ContextProvider","ContextConsumer","Profiler","ForwardRef","pendingProps","Suspense","OffscreenComponent","Error","nodeToHostNode","_node","mapper","item","ReactDOM","findDOMNode","eventOptions","animation","pointerEvents","getEmptyStateValue","EmptyState","Component","testRenderer","ShallowRenderer","render","_instance","state","wrapAct","fn","returnVal","getProviderDefaultValue","Provider","_context","_defaultValue","_currentValue","makeFakeElement","$$typeof","Element","isStateful","prototype","isReactComponent","__reactAutoBindPairs","ReactSeventeenAdapter","lifecycles","options","enableComponentDidUpdateOnSetState","legacyContextMode","componentDidUpdate","onSetState","getDerivedStateFromProps","getSnapshotBeforeUpdate","setState","skipsComponentDidUpdateOnNullish","getChildContext","calledByRenderer","getDerivedStateFromError","TypeError","attachTo","hydrateIn","wrappingComponentProps","domNode","global","document","adapter","context","callback","wrapperProps","refProp","ReactWrapperComponent","wrappedEl","hydrate","setChildProps","unmount","unmountComponentAtNode","getNode","isCustomComponent","_reactInternals","simulateError","nodeHierarchy","rootNode","error","isErrorBoundary","elInstance","componentDidCatch","find","catchingInstance","catchingType","displayNameOfNode","undefined","simulateEvent","event","mock","mappedEvent","eventFn","batchedUpdates","getWrappingComponentRenderer","inst","getMountWrapperInstance","wrapInvoke","renderer","isDOM","cachedNode","lastComponent","wrappedComponent","sentinel","wrapPureComponent","compare","RangeError","shouldComponentUpdate","nextProps","isPureReactComponent","memoized","prevProps","wrappedComponentFn","shouldUpdate","args","defaultProps","displayName","wrapFunctionalComponent","renderElement","elConfig","rest","renderedEl","typeIsExisted","clonedEl","elementIsChanged","unmaskedContext","providerValues","Map","set","value","MockProvider","getProviderFromConsumer","has","get","MockConsumer","contextTypes","InnerComp","emptyStateValue","Object","defineProperty","configurable","enumerable","writable","output","getRenderOutput","concat","handler","checkPropTypes","typeSpecs","values","location","hierarchy","childContextTypes","ContextWrapper","ReactDOMServer","renderToStaticMarkup","mode","EnzymeAdapter","MODES","MOUNT","createMountRenderer","SHALLOW","createShallowRenderer","STRING","createStringRenderer","element","matchingType","supportsArray","nodes","ConcurrentMode","AsyncMode","NaN","StrictMode","$$typeofType","nodeName","name","object","fragment","fakeElement","isValidElement","Consumer","RootFinder","module","exports"],"mappings":"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","sourcesContent":["/* eslint no-use-before-define: off */\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport ReactDOMServer from 'react-dom/server';\r\nimport ShallowRenderer from 'react-test-renderer/shallow';\r\nimport { version as testRendererVersion } from 'react-test-renderer/package.json';\r\nimport TestUtils from 'react-dom/test-utils';\r\nimport semver from 'semver';\r\nimport checkPropTypes from 'prop-types/checkPropTypes';\r\nimport has from 'has';\r\nimport {\r\n  AsyncMode,\r\n  ConcurrentMode,\r\n  ContextConsumer,\r\n  ContextProvider,\r\n  Element,\r\n  ForwardRef,\r\n  Fragment,\r\n  isContextConsumer,\r\n  isContextProvider,\r\n  isElement,\r\n  isForwardRef,\r\n  isPortal,\r\n  isSuspense,\r\n  isValidElementType,\r\n  Lazy,\r\n  Memo,\r\n  Portal,\r\n  Profiler,\r\n  StrictMode,\r\n  Suspense,\r\n} from 'react-is';\r\nimport { EnzymeAdapter } from 'enzyme';\r\nimport { typeOfNode } from 'enzyme/build/Utils';\r\nimport shallowEqual from 'enzyme-shallow-equal';\r\nimport {\r\n  displayNameOfNode,\r\n  elementToTree as utilElementToTree,\r\n  nodeTypeFromType as utilNodeTypeFromType,\r\n  mapNativeEventNames,\r\n  propFromEvent,\r\n  assertDomAvailable,\r\n  withSetStateAllowed,\r\n  createRenderWrapper,\r\n  createMountWrapper,\r\n  propsWithKeysAndRef,\r\n  ensureKeyOrUndefined,\r\n  simulateError,\r\n  wrap,\r\n  getMaskedContext,\r\n  getComponentStack,\r\n  RootFinder,\r\n  getNodeFromRootFinder,\r\n  wrapWithWrappingComponent,\r\n  getWrappingComponentMountRenderer,\r\n  compareNodeTypeOf,\r\n} from 'enzyme-adapter-utils';\r\nimport findCurrentFiberUsingSlowPath from './findCurrentFiberUsingSlowPath';\r\nimport detectFiberTags from './detectFiberTags';\r\n\r\nconst is164 = !!TestUtils.Simulate.touchStart; // 16.4+\r\nconst is165 = !!TestUtils.Simulate.auxClick; // 16.5+\r\nconst is166 = is165 && !React.unstable_AsyncMode; // 16.6+\r\nconst is168 = is166 && typeof TestUtils.act === 'function';\r\n\r\nconst hasShouldComponentUpdateBug = semver.satisfies(testRendererVersion, '< 16.8');\r\n\r\n// Lazily populated if DOM is available.\r\nlet FiberTags = null;\r\n\r\nfunction nodeAndSiblingsArray(nodeWithSibling) {\r\n  const array = [];\r\n  let node = nodeWithSibling;\r\n  while (node != null) {\r\n    array.push(node);\r\n    node = node.sibling;\r\n  }\r\n  return array;\r\n}\r\n\r\nfunction flatten(arr) {\r\n  const result = [];\r\n  const stack = [{ i: 0, array: arr }];\r\n  while (stack.length) {\r\n    const n = stack.pop();\r\n    while (n.i < n.array.length) {\r\n      const el = n.array[n.i];\r\n      n.i += 1;\r\n      if (Array.isArray(el)) {\r\n        stack.push(n);\r\n        stack.push({ i: 0, array: el });\r\n        break;\r\n      }\r\n      result.push(el);\r\n    }\r\n  }\r\n  return result;\r\n}\r\n\r\nfunction nodeTypeFromType(type) {\r\n  if (type === Portal) {\r\n    return 'portal';\r\n  }\r\n\r\n  return utilNodeTypeFromType(type);\r\n}\r\n\r\nfunction isMemo(type) {\r\n  return compareNodeTypeOf(type, Memo);\r\n}\r\n\r\nfunction isLazy(type) {\r\n  return compareNodeTypeOf(type, Lazy);\r\n}\r\n\r\nfunction unmemoType(type) {\r\n  return isMemo(type) ? type.type : type;\r\n}\r\n\r\nfunction checkIsSuspenseAndCloneElement(el, { suspenseFallback }) {\r\n  if (!isSuspense(el)) {\r\n    return el;\r\n  }\r\n\r\n  let { children } = el.props;\r\n\r\n  if (suspenseFallback) {\r\n    const { fallback } = el.props;\r\n    children = replaceLazyWithFallback(children, fallback);\r\n  }\r\n\r\n  const FakeSuspenseWrapper = (props) => React.createElement(\r\n    el.type,\r\n    { ...el.props, ...props },\r\n    children,\r\n  );\r\n  return React.createElement(FakeSuspenseWrapper, null, children);\r\n}\r\n\r\nfunction elementToTree(el) {\r\n  if (!isPortal(el)) {\r\n    return utilElementToTree(el, elementToTree);\r\n  }\r\n\r\n  const { children, containerInfo } = el;\r\n  const props = { children, containerInfo };\r\n\r\n  return {\r\n    nodeType: 'portal',\r\n    type: Portal,\r\n    props,\r\n    key: ensureKeyOrUndefined(el.key),\r\n    ref: el.ref || null,\r\n    instance: null,\r\n    rendered: elementToTree(el.children),\r\n  };\r\n}\r\n\r\nfunction toTree(vnode) {\r\n  if (vnode == null) {\r\n    return null;\r\n  }\r\n  // TODO(lmr): I'm not really sure I understand whether or not this is what\r\n  // i should be doing, or if this is a hack for something i'm doing wrong\r\n  // somewhere else. Should talk to sebastian about this perhaps\r\n  const node = findCurrentFiberUsingSlowPath(vnode);\r\n  switch (node.tag) {\r\n    case FiberTags.HostRoot:\r\n      return childrenToTree(node.child);\r\n    case FiberTags.HostPortal: {\r\n      const {\r\n        stateNode: { containerInfo },\r\n        memoizedProps: children,\r\n      } = node;\r\n      const props = { containerInfo, children };\r\n      return {\r\n        nodeType: 'portal',\r\n        type: Portal,\r\n        props,\r\n        key: ensureKeyOrUndefined(node.key),\r\n        ref: node.ref,\r\n        instance: null,\r\n        rendered: childrenToTree(node.child),\r\n      };\r\n    }\r\n    case FiberTags.ClassComponent:\r\n      return {\r\n        nodeType: 'class',\r\n        type: node.type,\r\n        props: { ...node.memoizedProps },\r\n        key: ensureKeyOrUndefined(node.key),\r\n        ref: node.ref,\r\n        instance: node.stateNode,\r\n        rendered: childrenToTree(node.child),\r\n      };\r\n    case FiberTags.FunctionalComponent:\r\n      return {\r\n        nodeType: 'function',\r\n        type: node.type,\r\n        props: { ...node.memoizedProps },\r\n        key: ensureKeyOrUndefined(node.key),\r\n        ref: node.ref,\r\n        instance: null,\r\n        rendered: childrenToTree(node.child),\r\n      };\r\n    case FiberTags.MemoClass:\r\n      return {\r\n        nodeType: 'class',\r\n        type: node.elementType.type,\r\n        props: { ...node.memoizedProps },\r\n        key: ensureKeyOrUndefined(node.key),\r\n        ref: node.ref,\r\n        instance: node.stateNode,\r\n        rendered: childrenToTree(node.child.child),\r\n      };\r\n    case FiberTags.MemoSFC: {\r\n      let renderedNodes = flatten(nodeAndSiblingsArray(node.child).map(toTree));\r\n      if (renderedNodes.length === 0) {\r\n        renderedNodes = [node.memoizedProps.children];\r\n      }\r\n      return {\r\n        nodeType: 'function',\r\n        type: node.elementType,\r\n        props: { ...node.memoizedProps },\r\n        key: ensureKeyOrUndefined(node.key),\r\n        ref: node.ref,\r\n        instance: null,\r\n        rendered: renderedNodes,\r\n      };\r\n    }\r\n    case FiberTags.HostComponent: {\r\n      let renderedNodes = flatten(nodeAndSiblingsArray(node.child).map(toTree));\r\n      if (renderedNodes.length === 0) {\r\n        renderedNodes = [node.memoizedProps.children];\r\n      }\r\n      return {\r\n        nodeType: 'host',\r\n        type: node.type,\r\n        props: { ...node.memoizedProps },\r\n        key: ensureKeyOrUndefined(node.key),\r\n        ref: node.ref,\r\n        instance: node.stateNode,\r\n        rendered: renderedNodes,\r\n      };\r\n    }\r\n    case FiberTags.HostText:\r\n      return node.memoizedProps;\r\n    case FiberTags.Fragment:\r\n    case FiberTags.Mode:\r\n    case FiberTags.ContextProvider:\r\n    case FiberTags.ContextConsumer:\r\n      return childrenToTree(node.child);\r\n    case FiberTags.Profiler:\r\n    case FiberTags.ForwardRef: {\r\n      return {\r\n        nodeType: 'function',\r\n        type: node.type,\r\n        props: { ...node.pendingProps },\r\n        key: ensureKeyOrUndefined(node.key),\r\n        ref: node.ref,\r\n        instance: null,\r\n        rendered: childrenToTree(node.child),\r\n      };\r\n    }\r\n    case FiberTags.Suspense: {\r\n      return {\r\n        nodeType: 'function',\r\n        type: Suspense,\r\n        props: { ...node.memoizedProps },\r\n        key: ensureKeyOrUndefined(node.key),\r\n        ref: node.ref,\r\n        instance: null,\r\n        rendered: childrenToTree(node.child),\r\n      };\r\n    }\r\n    case FiberTags.Lazy:\r\n      return childrenToTree(node.child);\r\n    case FiberTags.OffscreenComponent:\r\n      return toTree(node.child);\r\n    default:\r\n      throw new Error(`Enzyme Internal Error: unknown node with tag ${node.tag}`);\r\n  }\r\n}\r\n\r\nfunction childrenToTree(node) {\r\n  if (!node) {\r\n    return null;\r\n  }\r\n  const children = nodeAndSiblingsArray(node);\r\n  if (children.length === 0) {\r\n    return null;\r\n  }\r\n  if (children.length === 1) {\r\n    return toTree(children[0]);\r\n  }\r\n  return flatten(children.map(toTree));\r\n}\r\n\r\nfunction nodeToHostNode(_node) {\r\n  // NOTE(lmr): node could be a function component\r\n  // which wont have an instance prop, but we can get the\r\n  // host node associated with its return value at that point.\r\n  // Although this breaks down if the return value is an array,\r\n  // as is possible with React 16.\r\n  let node = _node;\r\n  while (node && !Array.isArray(node) && node.instance === null) {\r\n    node = node.rendered;\r\n  }\r\n  // if the SFC returned null effectively, there is no host node.\r\n  if (!node) {\r\n    return null;\r\n  }\r\n\r\n  const mapper = (item) => {\r\n    if (item && item.instance) return ReactDOM.findDOMNode(item.instance);\r\n    return null;\r\n  };\r\n  if (Array.isArray(node)) {\r\n    return node.map(mapper);\r\n  }\r\n  if (Array.isArray(node.rendered) && node.nodeType === 'class') {\r\n    return node.rendered.map(mapper);\r\n  }\r\n  return mapper(node);\r\n}\r\n\r\nfunction replaceLazyWithFallback(node, fallback) {\r\n  if (!node) {\r\n    return null;\r\n  }\r\n  if (Array.isArray(node)) {\r\n    return node.map((el) => replaceLazyWithFallback(el, fallback));\r\n  }\r\n  if (isLazy(node.type)) {\r\n    return fallback;\r\n  }\r\n  return {\r\n    ...node,\r\n    props: {\r\n      ...node.props,\r\n      children: replaceLazyWithFallback(node.props.children, fallback),\r\n    },\r\n  };\r\n}\r\n\r\nconst eventOptions = {\r\n  animation: true,\r\n  pointerEvents: is164,\r\n  auxClick: is165,\r\n};\r\n\r\nfunction getEmptyStateValue() {\r\n  // this handles a bug in React 16.0 - 16.2\r\n  // see https://github.com/facebook/react/commit/39be83565c65f9c522150e52375167568a2a1459\r\n  // also see https://github.com/facebook/react/pull/11965\r\n\r\n  class EmptyState extends React.Component {\r\n    render() {\r\n      return null;\r\n    }\r\n  }\r\n  const testRenderer = new ShallowRenderer();\r\n  testRenderer.render(React.createElement(EmptyState));\r\n  return testRenderer._instance.state;\r\n}\r\n\r\nfunction wrapAct(fn) {\r\n  if (!is168) {\r\n    return fn();\r\n  }\r\n  let returnVal;\r\n  TestUtils.act(() => { returnVal = fn(); });\r\n  return returnVal;\r\n}\r\n\r\nfunction getProviderDefaultValue(Provider) {\r\n  // React stores references to the Provider's defaultValue differently across versions.\r\n  if ('_defaultValue' in Provider._context) {\r\n    return Provider._context._defaultValue;\r\n  }\r\n  if ('_currentValue' in Provider._context) {\r\n    return Provider._context._currentValue;\r\n  }\r\n  throw new Error('Enzyme Internal Error: can’t figure out how to get Provider’s default value');\r\n}\r\n\r\nfunction makeFakeElement(type) {\r\n  return { $$typeof: Element, type };\r\n}\r\n\r\nfunction isStateful(Component) {\r\n  return Component.prototype && (\r\n    Component.prototype.isReactComponent\r\n    || Array.isArray(Component.__reactAutoBindPairs) // fallback for createClass components\r\n  );\r\n}\r\n\r\nclass ReactSeventeenAdapter extends EnzymeAdapter {\r\n  constructor() {\r\n    super();\r\n    const { lifecycles } = this.options;\r\n    this.options = {\r\n      ...this.options,\r\n      enableComponentDidUpdateOnSetState: true, // TODO: remove, semver-major\r\n      legacyContextMode: 'parent',\r\n      lifecycles: {\r\n        ...lifecycles,\r\n        componentDidUpdate: {\r\n          onSetState: true,\r\n        },\r\n        getDerivedStateFromProps: {\r\n          hasShouldComponentUpdateBug,\r\n        },\r\n        getSnapshotBeforeUpdate: true,\r\n        setState: {\r\n          skipsComponentDidUpdateOnNullish: true,\r\n        },\r\n        getChildContext: {\r\n          calledByRenderer: false,\r\n        },\r\n        getDerivedStateFromError: is166,\r\n      },\r\n    };\r\n  }\r\n\r\n  createMountRenderer(options) {\r\n    assertDomAvailable('mount');\r\n    if (has(options, 'suspenseFallback')) {\r\n      throw new TypeError('`suspenseFallback` is not supported by the `mount` renderer');\r\n    }\r\n    if (FiberTags === null) {\r\n      // Requires DOM.\r\n      FiberTags = detectFiberTags();\r\n    }\r\n    const { attachTo, hydrateIn, wrappingComponentProps } = options;\r\n    const domNode = hydrateIn || attachTo || global.document.createElement('div');\r\n    let instance = null;\r\n    const adapter = this;\r\n    return {\r\n      render(el, context, callback) {\r\n        return wrapAct(() => {\r\n          if (instance === null) {\r\n            const { type, props, ref } = el;\r\n            const wrapperProps = {\r\n              Component: type,\r\n              props,\r\n              wrappingComponentProps,\r\n              context,\r\n              ...(ref && { refProp: ref }),\r\n            };\r\n            const ReactWrapperComponent = createMountWrapper(el, { ...options, adapter });\r\n            const wrappedEl = React.createElement(ReactWrapperComponent, wrapperProps);\r\n            instance = hydrateIn\r\n              ? ReactDOM.hydrate(wrappedEl, domNode)\r\n              : ReactDOM.render(wrappedEl, domNode);\r\n            if (typeof callback === 'function') {\r\n              callback();\r\n            }\r\n          } else {\r\n            instance.setChildProps(el.props, context, callback);\r\n          }\r\n        });\r\n      },\r\n      unmount() {\r\n        ReactDOM.unmountComponentAtNode(domNode);\r\n        instance = null;\r\n      },\r\n      getNode() {\r\n        if (!instance) {\r\n          return null;\r\n        }\r\n        return getNodeFromRootFinder(\r\n          adapter.isCustomComponent,\r\n          toTree(instance._reactInternals),\r\n          options,\r\n        );\r\n      },\r\n      simulateError(nodeHierarchy, rootNode, error) {\r\n        const isErrorBoundary = ({ instance: elInstance, type }) => {\r\n          if (is166 && type && type.getDerivedStateFromError) {\r\n            return true;\r\n          }\r\n          return elInstance && elInstance.componentDidCatch;\r\n        };\r\n\r\n        const {\r\n          instance: catchingInstance,\r\n          type: catchingType,\r\n        } = nodeHierarchy.find(isErrorBoundary) || {};\r\n\r\n        simulateError(\r\n          error,\r\n          catchingInstance,\r\n          rootNode,\r\n          nodeHierarchy,\r\n          nodeTypeFromType,\r\n          adapter.displayNameOfNode,\r\n          is166 ? catchingType : undefined,\r\n        );\r\n      },\r\n      simulateEvent(node, event, mock) {\r\n        const mappedEvent = mapNativeEventNames(event, eventOptions);\r\n        const eventFn = TestUtils.Simulate[mappedEvent];\r\n        if (!eventFn) {\r\n          throw new TypeError(`ReactWrapper::simulate() event '${event}' does not exist`);\r\n        }\r\n        wrapAct(() => {\r\n          eventFn(adapter.nodeToHostNode(node), mock);\r\n        });\r\n      },\r\n      batchedUpdates(fn) {\r\n        return fn();\r\n        // return ReactDOM.unstable_batchedUpdates(fn);\r\n      },\r\n      getWrappingComponentRenderer() {\r\n        return {\r\n          ...this,\r\n          ...getWrappingComponentMountRenderer({\r\n            toTree: (inst) => toTree(inst._reactInternals),\r\n            getMountWrapperInstance: () => instance,\r\n          }),\r\n        };\r\n      },\r\n      ...(is168 && { wrapInvoke: wrapAct }),\r\n    };\r\n  }\r\n\r\n  createShallowRenderer(options = {}) {\r\n    const adapter = this;\r\n    const renderer = new ShallowRenderer();\r\n    const { suspenseFallback } = options;\r\n    if (typeof suspenseFallback !== 'undefined' && typeof suspenseFallback !== 'boolean') {\r\n      throw TypeError('`options.suspenseFallback` should be boolean or undefined');\r\n    }\r\n    let isDOM = false;\r\n    let cachedNode = null;\r\n\r\n    let lastComponent = null;\r\n    let wrappedComponent = null;\r\n    const sentinel = {};\r\n\r\n    // wrap memo components with a PureComponent, or a class component with sCU\r\n    const wrapPureComponent = (Component, compare) => {\r\n      if (!is166) {\r\n        throw new RangeError('this function should not be called in React < 16.6. Please report this!');\r\n      }\r\n      if (lastComponent !== Component) {\r\n        if (isStateful(Component)) {\r\n          wrappedComponent = class extends Component {};\r\n          if (compare) {\r\n            wrappedComponent.prototype.shouldComponentUpdate = (nextProps) => (\r\n              !compare(this.props, nextProps)\r\n            );\r\n          } else {\r\n            wrappedComponent.prototype.isPureReactComponent = true;\r\n          }\r\n        } else {\r\n          let memoized = sentinel;\r\n          let prevProps;\r\n          wrappedComponent = function wrappedComponentFn(props, ...args) {\r\n            const shouldUpdate = memoized === sentinel || (compare\r\n              ? !compare(prevProps, props)\r\n              : !shallowEqual(prevProps, props)\r\n            );\r\n            if (shouldUpdate) {\r\n              memoized = Component({ ...Component.defaultProps, ...props }, ...args);\r\n              prevProps = props;\r\n            }\r\n            return memoized;\r\n          };\r\n        }\r\n        Object.assign(\r\n          wrappedComponent,\r\n          Component,\r\n          { displayName: adapter.displayNameOfNode({ type: Component }) },\r\n        );\r\n        lastComponent = Component;\r\n      }\r\n      return wrappedComponent;\r\n    };\r\n\r\n    // Wrap functional components on versions prior to 16.5,\r\n    // to avoid inadvertently pass a `this` instance to it.\r\n    const wrapFunctionalComponent = (Component) => {\r\n      if (is166 && has(Component, 'defaultProps')) {\r\n        if (lastComponent !== Component) {\r\n          wrappedComponent = Object.assign(\r\n            // eslint-disable-next-line new-cap\r\n            (props, ...args) => Component({ ...Component.defaultProps, ...props }, ...args),\r\n            Component,\r\n            { displayName: adapter.displayNameOfNode({ type: Component }) },\r\n          );\r\n          lastComponent = Component;\r\n        }\r\n        return wrappedComponent;\r\n      }\r\n      if (is165) {\r\n        return Component;\r\n      }\r\n\r\n      if (lastComponent !== Component) {\r\n        wrappedComponent = Object.assign(\r\n          (...args) => Component(...args), // eslint-disable-line new-cap\r\n          Component,\r\n        );\r\n        lastComponent = Component;\r\n      }\r\n      return wrappedComponent;\r\n    };\r\n\r\n    const renderElement = (elConfig, ...rest) => {\r\n      const renderedEl = renderer.render(elConfig, ...rest);\r\n\r\n      const typeIsExisted = !!(renderedEl && renderedEl.type);\r\n      if (is166 && typeIsExisted) {\r\n        const clonedEl = checkIsSuspenseAndCloneElement(renderedEl, { suspenseFallback });\r\n\r\n        const elementIsChanged = clonedEl.type !== renderedEl.type;\r\n        if (elementIsChanged) {\r\n          return renderer.render({ ...elConfig, type: clonedEl.type }, ...rest);\r\n        }\r\n      }\r\n\r\n      return renderedEl;\r\n    };\r\n\r\n    return {\r\n      render(el, unmaskedContext, {\r\n        providerValues = new Map(),\r\n      } = {}) {\r\n        cachedNode = el;\r\n        /* eslint consistent-return: 0 */\r\n        if (typeof el.type === 'string') {\r\n          isDOM = true;\r\n        } else if (isContextProvider(el)) {\r\n          providerValues.set(el.type, el.props.value);\r\n          const MockProvider = Object.assign(\r\n            (props) => props.children,\r\n            el.type,\r\n          );\r\n          return withSetStateAllowed(() => renderElement({ ...el, type: MockProvider }));\r\n        } else if (isContextConsumer(el)) {\r\n          const Provider = adapter.getProviderFromConsumer(el.type);\r\n          const value = providerValues.has(Provider)\r\n            ? providerValues.get(Provider)\r\n            : getProviderDefaultValue(Provider);\r\n          const MockConsumer = Object.assign(\r\n            (props) => props.children(value),\r\n            el.type,\r\n          );\r\n          return withSetStateAllowed(() => renderElement({ ...el, type: MockConsumer }));\r\n        } else {\r\n          isDOM = false;\r\n          let renderedEl = el;\r\n          if (isLazy(renderedEl)) {\r\n            throw TypeError('`React.lazy` is not supported by shallow rendering.');\r\n          }\r\n\r\n          renderedEl = checkIsSuspenseAndCloneElement(renderedEl, { suspenseFallback });\r\n          const { type: Component } = renderedEl;\r\n\r\n          const context = getMaskedContext(Component.contextTypes, unmaskedContext);\r\n\r\n          if (isMemo(el.type)) {\r\n            const { type: InnerComp, compare } = el.type;\r\n\r\n            return withSetStateAllowed(() => renderElement(\r\n              { ...el, type: wrapPureComponent(InnerComp, compare) },\r\n              context,\r\n            ));\r\n          }\r\n\r\n          if (!isStateful(Component) && typeof Component === 'function') {\r\n            return withSetStateAllowed(() => renderElement(\r\n              { ...renderedEl, type: wrapFunctionalComponent(Component) },\r\n              context,\r\n            ));\r\n          }\r\n\r\n          if (isStateful) {\r\n            // fix react bug; see implementation of `getEmptyStateValue`\r\n            const emptyStateValue = getEmptyStateValue();\r\n            if (emptyStateValue) {\r\n              Object.defineProperty(Component.prototype, 'state', {\r\n                configurable: true,\r\n                enumerable: true,\r\n                get() {\r\n                  return null;\r\n                },\r\n                set(value) {\r\n                  if (value !== emptyStateValue) {\r\n                    Object.defineProperty(this, 'state', {\r\n                      configurable: true,\r\n                      enumerable: true,\r\n                      value,\r\n                      writable: true,\r\n                    });\r\n                  }\r\n                  return true;\r\n                },\r\n              });\r\n            }\r\n          }\r\n          return withSetStateAllowed(() => renderElement(renderedEl, context));\r\n        }\r\n      },\r\n      unmount() {\r\n        renderer.unmount();\r\n      },\r\n      getNode() {\r\n        if (isDOM) {\r\n          return elementToTree(cachedNode);\r\n        }\r\n        const output = renderer.getRenderOutput();\r\n        return {\r\n          nodeType: nodeTypeFromType(cachedNode.type),\r\n          type: cachedNode.type,\r\n          props: cachedNode.props,\r\n          key: ensureKeyOrUndefined(cachedNode.key),\r\n          ref: cachedNode.ref,\r\n          instance: renderer._instance,\r\n          rendered: Array.isArray(output)\r\n            ? flatten(output).map((el) => elementToTree(el))\r\n            : elementToTree(output),\r\n        };\r\n      },\r\n      simulateError(nodeHierarchy, rootNode, error) {\r\n        simulateError(\r\n          error,\r\n          renderer._instance,\r\n          cachedNode,\r\n          nodeHierarchy.concat(cachedNode),\r\n          nodeTypeFromType,\r\n          adapter.displayNameOfNode,\r\n          is166 ? cachedNode.type : undefined,\r\n        );\r\n      },\r\n      simulateEvent(node, event, ...args) {\r\n        const handler = node.props[propFromEvent(event, eventOptions)];\r\n        if (handler) {\r\n          withSetStateAllowed(() => {\r\n            // TODO(lmr): create/use synthetic events\r\n            // TODO(lmr): emulate React's event propagation\r\n            // ReactDOM.unstable_batchedUpdates(() => {\r\n            handler(...args);\r\n            // });\r\n          });\r\n        }\r\n      },\r\n      batchedUpdates(fn) {\r\n        return fn();\r\n        // return ReactDOM.unstable_batchedUpdates(fn);\r\n      },\r\n      checkPropTypes(typeSpecs, values, location, hierarchy) {\r\n        return checkPropTypes(\r\n          typeSpecs,\r\n          values,\r\n          location,\r\n          displayNameOfNode(cachedNode),\r\n          () => getComponentStack(hierarchy.concat([cachedNode])),\r\n        );\r\n      },\r\n    };\r\n  }\r\n\r\n  createStringRenderer(options) {\r\n    if (has(options, 'suspenseFallback')) {\r\n      throw new TypeError('`suspenseFallback` should not be specified in options of string renderer');\r\n    }\r\n    return {\r\n      render(el, context) {\r\n        if (options.context && (el.type.contextTypes || options.childContextTypes)) {\r\n          const childContextTypes = {\r\n            ...(el.type.contextTypes || {}),\r\n            ...options.childContextTypes,\r\n          };\r\n          const ContextWrapper = createRenderWrapper(el, context, childContextTypes);\r\n          return ReactDOMServer.renderToStaticMarkup(React.createElement(ContextWrapper));\r\n        }\r\n        return ReactDOMServer.renderToStaticMarkup(el);\r\n      },\r\n    };\r\n  }\r\n\r\n  // Provided a bag of options, return an `EnzymeRenderer`. Some options can be implementation\r\n  // specific, like `attach` etc. for React, but not part of this interface explicitly.\r\n  // eslint-disable-next-line class-methods-use-this\r\n  createRenderer(options) {\r\n    switch (options.mode) {\r\n      case EnzymeAdapter.MODES.MOUNT: return this.createMountRenderer(options);\r\n      case EnzymeAdapter.MODES.SHALLOW: return this.createShallowRenderer(options);\r\n      case EnzymeAdapter.MODES.STRING: return this.createStringRenderer(options);\r\n      default:\r\n        throw new Error(`Enzyme Internal Error: Unrecognized mode: ${options.mode}`);\r\n    }\r\n  }\r\n\r\n  wrap(element) {\r\n    return wrap(element);\r\n  }\r\n\r\n  // converts an RSTNode to the corresponding JSX Pragma Element. This will be needed\r\n  // in order to implement the `Wrapper.mount()` and `Wrapper.shallow()` methods, but should\r\n  // be pretty straightforward for people to implement.\r\n  // eslint-disable-next-line class-methods-use-this\r\n  nodeToElement(node) {\r\n    if (!node || typeof node !== 'object') return null;\r\n    const { type } = node;\r\n    return React.createElement(unmemoType(type), propsWithKeysAndRef(node));\r\n  }\r\n\r\n  // eslint-disable-next-line class-methods-use-this\r\n  matchesElementType(node, matchingType) {\r\n    if (!node) {\r\n      return node;\r\n    }\r\n    const { type } = node;\r\n    return unmemoType(type) === unmemoType(matchingType);\r\n  }\r\n\r\n  elementToNode(element) {\r\n    return elementToTree(element);\r\n  }\r\n\r\n  nodeToHostNode(node, supportsArray = false) {\r\n    const nodes = nodeToHostNode(node);\r\n    if (Array.isArray(nodes) && !supportsArray) {\r\n      return nodes[0];\r\n    }\r\n    return nodes;\r\n  }\r\n\r\n  displayNameOfNode(node) {\r\n    if (!node) return null;\r\n    const { type, $$typeof } = node;\r\n\r\n    const nodeType = type || $$typeof;\r\n\r\n    // newer node types may be undefined, so only test if the nodeType exists\r\n    if (nodeType) {\r\n      switch (nodeType) {\r\n        case (is166 ? ConcurrentMode : AsyncMode) || NaN: return is166 ? 'ConcurrentMode' : 'AsyncMode';\r\n        case Fragment || NaN: return 'Fragment';\r\n        case StrictMode || NaN: return 'StrictMode';\r\n        case Profiler || NaN: return 'Profiler';\r\n        case Portal || NaN: return 'Portal';\r\n        case Suspense || NaN: return 'Suspense';\r\n        default:\r\n      }\r\n    }\r\n\r\n    const $$typeofType = type && type.$$typeof;\r\n\r\n    switch ($$typeofType) {\r\n      case ContextConsumer || NaN: return 'ContextConsumer';\r\n      case ContextProvider || NaN: return 'ContextProvider';\r\n      case Memo || NaN: {\r\n        const nodeName = displayNameOfNode(node);\r\n        return typeof nodeName === 'string' ? nodeName : `Memo(${displayNameOfNode(type)})`;\r\n      }\r\n      case ForwardRef || NaN: {\r\n        if (type.displayName) {\r\n          return type.displayName;\r\n        }\r\n        const name = displayNameOfNode({ type: type.render });\r\n        return name ? `ForwardRef(${name})` : 'ForwardRef';\r\n      }\r\n      case Lazy || NaN: {\r\n        return 'lazy';\r\n      }\r\n      default: return displayNameOfNode(node);\r\n    }\r\n  }\r\n\r\n  isValidElement(element) {\r\n    return isElement(element);\r\n  }\r\n\r\n  isValidElementType(object) {\r\n    return !!object && isValidElementType(object);\r\n  }\r\n\r\n  isFragment(fragment) {\r\n    return typeOfNode(fragment) === Fragment;\r\n  }\r\n\r\n  isCustomComponent(type) {\r\n    const fakeElement = makeFakeElement(type);\r\n    return !!type && (\r\n      typeof type === 'function'\r\n      || isForwardRef(fakeElement)\r\n      || isContextProvider(fakeElement)\r\n      || isContextConsumer(fakeElement)\r\n      || isSuspense(fakeElement)\r\n    );\r\n  }\r\n\r\n  isContextConsumer(type) {\r\n    return !!type && isContextConsumer(makeFakeElement(type));\r\n  }\r\n\r\n  isCustomComponentElement(inst) {\r\n    if (!inst || !this.isValidElement(inst)) {\r\n      return false;\r\n    }\r\n    return this.isCustomComponent(inst.type);\r\n  }\r\n\r\n  getProviderFromConsumer(Consumer) {\r\n    // React stores references to the Provider on a Consumer differently across versions.\r\n    if (Consumer) {\r\n      let Provider;\r\n      if (Consumer._context) { // check this first, to avoid a deprecation warning\r\n        ({ Provider } = Consumer._context);\r\n      } else if (Consumer.Provider) {\r\n        ({ Provider } = Consumer);\r\n      }\r\n      if (Provider) {\r\n        return Provider;\r\n      }\r\n    }\r\n    throw new Error('Enzyme Internal Error: can’t figure out how to get Provider from Consumer');\r\n  }\r\n\r\n  createElement(...args) {\r\n    return React.createElement(...args);\r\n  }\r\n\r\n  wrapWithWrappingComponent(node, options) {\r\n    return {\r\n      RootFinder,\r\n      node: wrapWithWrappingComponent(React.createElement, node, options),\r\n    };\r\n  }\r\n}\r\n\r\nmodule.exports = ReactSeventeenAdapter;\r\n"],"file":"ReactSeventeenAdapter.js"}